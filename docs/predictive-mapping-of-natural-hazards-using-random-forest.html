<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Predictive Mapping of Natural Hazards Using Random Forest | Advanced Geospatial Data Analysis with R – Applications in Geosciences</title>
  <meta name="description" content="Chapter 5 Predictive Mapping of Natural Hazards Using Random Forest | Advanced Geospatial Data Analysis with R – Applications in Geosciences" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Predictive Mapping of Natural Hazards Using Random Forest | Advanced Geospatial Data Analysis with R – Applications in Geosciences" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Predictive Mapping of Natural Hazards Using Random Forest | Advanced Geospatial Data Analysis with R – Applications in Geosciences" />
  
  
  

<meta name="author" content="Dr. Marj Tonini, Haokun Liu" />


<meta name="date" content="2024-08-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"/>
<link rel="next" href="interpretability-explainability-with-random-forest.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/AGDA_ImageCover.webp"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-overview"><i class="fa fa-check"></i>Book overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#computing-lab"><i class="fa fa-check"></i>Computing lab</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#target-audience"><i class="fa fa-check"></i>Target audience</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-information"><i class="fa fa-check"></i>Authors information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#my-journey-of-learning-integrating-geospatial-data-analysis-with-data-science"><i class="fa fa-check"></i>My Journey of Learning: Integrating Geospatial Data Analysis with Data Science</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-language"><i class="fa fa-check"></i><b>1.1</b> R Language</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-packages"><i class="fa fa-check"></i><b>1.1.1</b> R Packages</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#some-tips"><i class="fa fa-check"></i><b>1.1.2</b> Some tips</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-commands-online-resources"><i class="fa fa-check"></i><b>1.1.3</b> R Commands (online resources)</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-markdown"><i class="fa fa-check"></i><b>1.2</b> R Markdown</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-type-in-computational-analysis"><i class="fa fa-check"></i><b>1.3</b> Data type in computational analysis</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variables"><i class="fa fa-check"></i><b>1.3.1</b> Variables</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-structure-in-r"><i class="fa fa-check"></i><b>1.3.2</b> Data structure in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html"><i class="fa fa-check"></i><b>2</b> Basic operation with geodata in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#plotting-vector-dataset"><i class="fa fa-check"></i><b>2.2</b> Plotting vector dataset</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#package-sf-for-vector-dataset"><i class="fa fa-check"></i><b>2.2.1</b> Package <strong><em>sf</em></strong> for vector dataset</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#plot-vector-features"><i class="fa fa-check"></i><b>2.2.2</b> Plot vector features</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#plotting-raster-dataset"><i class="fa fa-check"></i><b>2.3</b> Plotting raster dataset</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#terra-package-and-raster-dataset"><i class="fa fa-check"></i><b>2.3.1</b> Terra package and raster dataset</a></li>
<li class="chapter" data-level="2.3.2" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#plot-raster-features"><i class="fa fa-check"></i><b>2.3.2</b> Plot raster features</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#geodata-manipulation"><i class="fa fa-check"></i><b>2.4</b> Geodata manipulation</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#manipulate-tabular-datasets"><i class="fa fa-check"></i><b>2.4.1</b> Manipulate tabular datasets</a></li>
<li class="chapter" data-level="2.4.2" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#pipes-chaining-of-multiple-operations"><i class="fa fa-check"></i><b>2.4.2</b> Pipes: chaining of multiple operations</a></li>
<li class="chapter" data-level="2.4.3" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#join-table"><i class="fa fa-check"></i><b>2.4.3</b> Join table</a></li>
<li class="chapter" data-level="2.4.4" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#mapping-with-ggplot2"><i class="fa fa-check"></i><b>2.4.4</b> Mapping with ggplot2</a></li>
<li class="chapter" data-level="2.4.5" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#cropping-ratser"><i class="fa fa-check"></i><b>2.4.5</b> Cropping ratser</a></li>
<li class="chapter" data-level="2.4.6" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#display-the-categorical-variables-of-a-raster"><i class="fa fa-check"></i><b>2.4.6</b> Display the categorical variables of a raster</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="basic-operation-with-geodata-in-r.html"><a href="basic-operation-with-geodata-in-r.html#further-reading"><i class="fa fa-check"></i><b>2.5</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html"><i class="fa fa-check"></i><b>3</b> Geographically Weighted Summary Statistics for Geosciences</a>
<ul>
<li class="chapter" data-level="3.1" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#gwss-for-natural-hazards-assessment"><i class="fa fa-check"></i><b>3.1</b> GWSS for natural hazards assessment</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#the-overall-methodology"><i class="fa fa-check"></i><b>3.1.1</b> The overall methodology</a></li>
<li class="chapter" data-level="3.1.2" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#forest-fires-dataset"><i class="fa fa-check"></i><b>3.1.2</b> Forest fires dataset</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#computing-lab-gwss"><i class="fa fa-check"></i><b>3.2</b> Computing lab: GWSS</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#load-the-libraries"><i class="fa fa-check"></i><b>3.2.1</b> Load the libraries</a></li>
<li class="chapter" data-level="3.2.2" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#import-the-forest-fire-dataset"><i class="fa fa-check"></i><b>3.2.2</b> Import the forest fire dataset</a></li>
<li class="chapter" data-level="3.2.3" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#forest-fires-spatial-distribution"><i class="fa fa-check"></i><b>3.2.3</b> Forest fires spatial distribution</a></li>
<li class="chapter" data-level="3.2.4" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#compute-the-gwss"><i class="fa fa-check"></i><b>3.2.4</b> Compute the GWSS</a></li>
<li class="chapter" data-level="3.2.5" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#look-at-the-results"><i class="fa fa-check"></i><b>3.2.5</b> Look at the results</a></li>
<li class="chapter" data-level="3.2.6" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#gwss-maps"><i class="fa fa-check"></i><b>3.2.6</b> GWSS maps</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="geographically-weighted-summary-statistics-for-geosciences.html"><a href="geographically-weighted-summary-statistics-for-geosciences.html#conclusions-and-further-analyses"><i class="fa fa-check"></i><b>3.3</b> Conclusions and further analyses</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><i class="fa fa-check"></i><b>4</b> Spatio-Temporal Cluster Analysis of Geoenvironmental Processes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#st-clustering-for-fire-management"><i class="fa fa-check"></i><b>4.1</b> ST clustering for fire management</a></li>
<li class="chapter" data-level="4.2" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#clustering-methods"><i class="fa fa-check"></i><b>4.2</b> Clustering methods</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#ripleys-k-function"><i class="fa fa-check"></i><b>4.2.1</b> Ripley’s K-function</a></li>
<li class="chapter" data-level="4.2.2" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#kernel-density-estimator"><i class="fa fa-check"></i><b>4.2.2</b> Kernel density estimator</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#computing-lab-spatio-temporal-clustering"><i class="fa fa-check"></i><b>4.3</b> Computing lab: spatio-temporal clustering</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#load-the-libraries-1"><i class="fa fa-check"></i><b>4.3.1</b> Load the libraries</a></li>
<li class="chapter" data-level="4.3.2" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#import-the-forest-fire-dataset-1"><i class="fa fa-check"></i><b>4.3.2</b> Import the forest fire dataset</a></li>
<li class="chapter" data-level="4.3.3" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#ff-subsets-based-on-the-burned-areas-size"><i class="fa fa-check"></i><b>4.3.3</b> FF-subsets based on the burned areas’ size</a></li>
<li class="chapter" data-level="4.3.4" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#ff-subsets-based-on-the-geographical-distribution"><i class="fa fa-check"></i><b>4.3.4</b> FF-subsets based on the geographical distribution</a></li>
<li class="chapter" data-level="4.3.5" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#extract-time-and-pts-object"><i class="fa fa-check"></i><b>4.3.5</b> Extract time and PTS object</a></li>
<li class="chapter" data-level="4.3.6" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#compute-the-space-time-k-function"><i class="fa fa-check"></i><b>4.3.6</b> Compute the space-time K-function</a></li>
<li class="chapter" data-level="4.3.7" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#assess-the-space-time-clustering-behavior"><i class="fa fa-check"></i><b>4.3.7</b> Assess the space-time clustering behavior</a></li>
<li class="chapter" data-level="4.3.8" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#compute-the-space-time-kernel-density-estimator"><i class="fa fa-check"></i><b>4.3.8</b> Compute the space-time Kernel Density Estimator</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html"><a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html#conclusions-and-further-analyses-1"><i class="fa fa-check"></i><b>4.4</b> Conclusions and further analyses</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html"><i class="fa fa-check"></i><b>5</b> Predictive Mapping of Natural Hazards Using Random Forest</a>
<ul>
<li class="chapter" data-level="5.1" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#rf-for-landslides-susceptibility-mapping"><i class="fa fa-check"></i><b>5.1</b> RF for landslides susceptibility mapping</a></li>
<li class="chapter" data-level="5.2" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#computing-lab-random-forest"><i class="fa fa-check"></i><b>5.2</b> Computing lab: Random Forest</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#load-the-libraries-2"><i class="fa fa-check"></i><b>5.2.1</b> Load the libraries</a></li>
<li class="chapter" data-level="5.2.2" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#load-the-input-datasets"><i class="fa fa-check"></i><b>5.2.2</b> Load the input datasets</a></li>
<li class="chapter" data-level="5.2.3" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#the-use-of-categorical-variables-in-machine-learning"><i class="fa fa-check"></i><b>5.2.3</b> The use of categorical variables in Machine Learning</a></li>
<li class="chapter" data-level="5.2.4" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#extract-the-values"><i class="fa fa-check"></i><b>5.2.4</b> Extract the values</a></li>
<li class="chapter" data-level="5.2.5" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#split-the-input-dataset-into-training-and-testing"><i class="fa fa-check"></i><b>5.2.5</b> Split the input dataset into training and testing</a></li>
<li class="chapter" data-level="5.2.6" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#run-random-forest"><i class="fa fa-check"></i><b>5.2.6</b> Run Random Forest</a></li>
<li class="chapter" data-level="5.2.7" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#rf-main-outputs"><i class="fa fa-check"></i><b>5.2.7</b> RF main outputs</a></li>
<li class="chapter" data-level="5.2.8" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#model-evaluation"><i class="fa fa-check"></i><b>5.2.8</b> Model evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#susceptibility-mapping"><i class="fa fa-check"></i><b>5.3</b> Susceptibility mapping</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#class-intervals-for-decision-maker"><i class="fa fa-check"></i><b>5.3.1</b> Class intervals for decision maker</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#conclusions-and-further-analyses-2"><i class="fa fa-check"></i><b>5.4</b> Conclusions and further analyses</a></li>
<li class="chapter" data-level="5.5" data-path="predictive-mapping-of-natural-hazards-using-random-forest.html"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#further-reading-on-this-topic"><i class="fa fa-check"></i><b>5.5</b> Further reading on this topic</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html"><i class="fa fa-check"></i><b>6</b> Interpretability &amp; Explainability with Random Forest</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html#aim-of-the-present-lab"><i class="fa fa-check"></i><b>6.1</b> Aim of the present lab</a></li>
<li class="chapter" data-level="6.2" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html#computing-lab-tools-to-comprehend-rf"><i class="fa fa-check"></i><b>6.2</b> Computing lab: tools to comprehend RF</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html#re-load-libraries-and-workspace"><i class="fa fa-check"></i><b>6.2.1</b> Re-load libraries and workspace</a></li>
<li class="chapter" data-level="6.2.2" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html#surrogate-model"><i class="fa fa-check"></i><b>6.2.2</b> Surrogate model</a></li>
<li class="chapter" data-level="6.2.3" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html#features-importance-score"><i class="fa fa-check"></i><b>6.2.3</b> Features importance score</a></li>
<li class="chapter" data-level="6.2.4" data-path="interpretability-explainability-with-random-forest.html"><a href="interpretability-explainability-with-random-forest.html#partial-dependence-plot"><i class="fa fa-check"></i><b>6.2.4</b> Partial dependence plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="local-random-forest.html"><a href="local-random-forest.html"><i class="fa fa-check"></i><b>7</b> Local Random Forest</a>
<ul>
<li class="chapter" data-level="7.1" data-path="local-random-forest.html"><a href="local-random-forest.html#computing-lab-grf"><i class="fa fa-check"></i><b>7.1</b> Computing lab: GRF</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="local-random-forest.html"><a href="local-random-forest.html#feature-importance"><i class="fa fa-check"></i><b>7.1.1</b> Feature importance</a></li>
<li class="chapter" data-level="7.1.2" data-path="local-random-forest.html"><a href="local-random-forest.html#local-r-squared"><i class="fa fa-check"></i><b>7.1.2</b> Local R squared</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="local-random-forest.html"><a href="local-random-forest.html#conclusions-and-further-analyses-3"><i class="fa fa-check"></i><b>7.2</b> Conclusions and further analyses</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><i class="fa fa-check"></i><b>8</b> Defining Territorial Typologies Using Unsupervised Learning: A SOM Approach</a>
<ul>
<li class="chapter" data-level="8.1" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#geo-demographic-context-in-switzerland"><i class="fa fa-check"></i><b>8.1</b> Geo-demographic context in Switzerland</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#swiss-census-data"><i class="fa fa-check"></i><b>8.1.1</b> Swiss census data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#self-organizing-map"><i class="fa fa-check"></i><b>8.2</b> Self Organizing Map</a></li>
<li class="chapter" data-level="8.3" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#computing-lab-som"><i class="fa fa-check"></i><b>8.3</b> Computing lab: SOM</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#load-the-libraries-3"><i class="fa fa-check"></i><b>8.3.1</b> Load the libraries</a></li>
<li class="chapter" data-level="8.3.2" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#import-the-swiss-census-dataset"><i class="fa fa-check"></i><b>8.3.2</b> Import the Swiss census dataset</a></li>
<li class="chapter" data-level="8.3.3" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#run-som"><i class="fa fa-check"></i><b>8.3.3</b> Run SOM</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#hierarchical-clustering"><i class="fa fa-check"></i><b>8.4</b> Hierarchical clustering</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#map-clusters-onto-the-geographical-space"><i class="fa fa-check"></i><b>8.4.1</b> <strong>Map clusters onto the geographical space</strong></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#clusters-characterization"><i class="fa fa-check"></i><b>8.5</b> Clusters characterization</a></li>
<li class="chapter" data-level="8.6" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#conclusions"><i class="fa fa-check"></i><b>8.6</b> Conclusions</a></li>
<li class="chapter" data-level="8.7" data-path="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html"><a href="defining-territorial-typologies-using-unsupervised-learning-a-som-approach.html#further-analyses"><i class="fa fa-check"></i><b>8.7</b> Further analyses</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html"><i class="fa fa-check"></i><b>9</b> DBSCAN for 3D features detection in geosciences</a>
<ul>
<li class="chapter" data-level="9.1" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#the-overall-methodology-1"><i class="fa fa-check"></i><b>9.1</b> The overall methodology</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#dbscan-3-d-density-based-clustering-algorithm"><i class="fa fa-check"></i><b>9.1.1</b> DBSCAN: 3-D density based clustering algorithm</a></li>
<li class="chapter" data-level="9.1.2" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#field-campaign"><i class="fa fa-check"></i><b>9.1.2</b> Field campaign</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#computing-lab-dbscan"><i class="fa fa-check"></i><b>9.2</b> Computing lab: DBSCAN</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#load-the-libraries-4"><i class="fa fa-check"></i><b>9.2.1</b> Load the libraries</a></li>
<li class="chapter" data-level="9.2.2" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#import-and-visualize-the-point-clouds-dataset"><i class="fa fa-check"></i><b>9.2.2</b> Import and visualize the point clouds dataset</a></li>
<li class="chapter" data-level="9.2.3" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#compute-dbscan"><i class="fa fa-check"></i><b>9.2.3</b> Compute DBSCAN</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="dbscan-for-3d-features-detection-in-geosciences.html"><a href="dbscan-for-3d-features-detection-in-geosciences.html#conclusions-and-further-analyses-4"><i class="fa fa-check"></i><b>9.3</b> Conclusions and further analyses</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced Geospatial Data Analysis with R – Applications in Geosciences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="predictive-mapping-of-natural-hazards-using-random-forest" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Predictive Mapping of Natural Hazards Using Random Forest<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#predictive-mapping-of-natural-hazards-using-random-forest" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Random Forest (RF) is a robust and widely-used machine learning algorithm particularly suited for predictive mapping in the context of natural hazards and susceptibility assessments.
It operates by constructing multiple decision trees during training, and then aggregating their predictions to improve accuracy and generalizability <span class="citation">(<a href="#ref-breiman_random_2001">Breiman, 2001</a>)</span>.
For the sake of clarity, we define <em>susceptibility</em> of an area the potential to experience a particular hazard in the future, based only on the intrinsic local properties of the territory, assessed in terms of relative spatial likelihood.
Machine Learning (ML) based approaches lend themselves particularly well to this purpose.
Essentially ML includes algorithms capable of learning from and making predictions on data by modelling the hidden/non-linear relationships between a set of input variables – also known as predictors – and output observations.</p>
<p>In natural hazard and susceptibility mapping, RF can analyze complex relationships between environmental variables such as topography, soil type, vegetation cover, and climate data to predict the likelihood of hazardous events – like landslides, floods, or earthquakes – across a landscape.
Its ability to handle large datasets, manage variables interactions, and provide importance rankings for predictor variables, makes it an invaluable tool for generating reliable susceptibility maps, which are crucial for disaster risk management and land-use planning.</p>
<div id="rf-for-landslides-susceptibility-mapping" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> RF for landslides susceptibility mapping<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#rf-for-landslides-susceptibility-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this application, we explore the capabilities RF to elaborate landslides susceptibility mapping in Canton Vaud, Switzerland.
Landslides are one of the major hazard occurring around the world.
In Switzerland, landslides cause damages to infrastructures and sometimes threaten human lives, especially shallow landslides.
Such slope movements are mainly triggered by intense rainfalls and generally very rapid and hardly predictable.</p>
<p>The research framework that inspired this computing lab refers to a pioneering study in susceptibility mapping for wildfire events by <span class="citation">(<a href="#ref-tonini_machine_2020">Tonini et al., 2020</a>)</span> and further developed for the assessment of variable importance by <span class="citation">(<a href="#ref-trucchia_machine-learning_2022">Trucchia et al., 2022</a>)</span>.
Analyses have been adapted to the case study of landslides.
The overall methodology is described in the following graphic.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:gen-met"></span>
<img src="images/Methodology.png" alt="Basic elements of the generic methodology \label{Methodology}" width="80%" height="80%" />
<p class="caption">
Figure 5.1: Basic elements of the generic methodology
</p>
</div>
</div>
<div id="computing-lab-random-forest" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Computing lab: Random Forest<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#computing-lab-random-forest" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="load-the-libraries-2" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Load the libraries<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#load-the-libraries-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To perform the analysis, you have first to install the following libraries:</p>
<ul>
<li><em>terra</em>: methods for spatial data analysis with vector (points, lines, polygons) and raster (grid) data</li>
<li><em>readr</em>: to provide a fast and friendly way to read tabulat data (like *.csv)</li>
<li><em>randomForest</em>: classification and regression, based on a forest of trees using random inputs</li>
<li><em>dplyr</em>: focused on tools for working with data frames</li>
<li><em>pROC</em>: allowing to compute, analyze ROC curves, and
<ul>
<li><em>plotROC</em><strong>:</strong> to display ROC curve</li>
</ul></li>
<li><em>ggplot2</em>: a system for declaratively creating graphics</li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-1" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb134-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-2" tabindex="-1"></a><span class="fu">library</span>(readr) </span>
<span id="cb134-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-3" tabindex="-1"></a><span class="fu">library</span>(randomForest) </span>
<span id="cb134-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-4" tabindex="-1"></a><span class="fu">library</span>(dplyr) </span>
<span id="cb134-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-5" tabindex="-1"></a><span class="fu">library</span>(pROC) </span>
<span id="cb134-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-6" tabindex="-1"></a><span class="fu">library</span>(plotROC) </span>
<span id="cb134-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-7" tabindex="-1"></a><span class="fu">library</span>(ggplot2) </span>
<span id="cb134-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-8" tabindex="-1"></a></span>
<span id="cb134-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb134-9" tabindex="-1"></a>(<span class="fu">.packages</span>())</span></code></pre></div>
</div>
<div id="load-the-input-datasets" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Load the input datasets<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#load-the-input-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the following you will import the landslides punctual dataset including presences and absences (<em>LS_pa</em>) and the predictor variables (in raster format).
This will enable to perform the exploratory data analyses step and the understanding of the input data structure.</p>
<div id="landslides-dataset" class="section level4 hasAnchor" number="5.2.2.1">
<h4><span class="header-section-number">5.2.2.1</span> Landslides dataset<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#landslides-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The landslide inventory has been provided by the environmental office of the Canton Vaud.
Only shallow landslides are used for susceptibility modelling.
One pixel per landslide-area (namely the one located at the highest elevation) has been extracted.
Since the landslide scarp is located in the upper part of the polygon, it makes sense to consider the highest pixel to characterize each single event.</p>
<p>Our model includes the implementation of the landslide <strong>pseudo-absences</strong>, which are the areas where the hazardous events did not took place (i.e. landslide location is known and the mapped footprint areas are available, but the non-landslide areas have to be defined).
Indeed, to assure a good generalization of the model and to avoid the overestimation of the absences, pseudo-absences need to be generated in all the cases where they are not explicitly expressed.
In this case study, an equal number of point as for presences has been randomly generated in the study area, except within landslides polygons, lakes and glaciers (that is what is called “<em>validity domain</em>”, where events could potentially occur).</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-1" tabindex="-1"></a><span class="co"># Import the boundary of Canton Vaud </span></span>
<span id="cb135-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-2" tabindex="-1"></a>Vaud <span class="ot">&lt;-</span> <span class="fu">vect</span>(<span class="st">&quot;data/RF/Vaud_CH.shp&quot;</span>)</span>
<span id="cb135-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-3" tabindex="-1"></a>Lake <span class="ot">&lt;-</span> <span class="fu">vect</span>(<span class="st">&quot;data/RF/Lakes_VD.shp&quot;</span>)</span>
<span id="cb135-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-4" tabindex="-1"></a></span>
<span id="cb135-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-5" tabindex="-1"></a></span>
<span id="cb135-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-6" tabindex="-1"></a><span class="co"># Import the landslides dataset (dependent variable)</span></span>
<span id="cb135-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-7" tabindex="-1"></a>LS_pa <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/RF/LS_pa.csv&quot;</span>) </span>
<span id="cb135-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-8" tabindex="-1"></a></span>
<span id="cb135-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-9" tabindex="-1"></a><span class="co"># Convert the numeric values (0/1) as factor </span></span>
<span id="cb135-10"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-10" tabindex="-1"></a><span class="do">##(i.e. categorical value)</span></span>
<span id="cb135-11"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-11" tabindex="-1"></a>LS_pa<span class="sc">$</span>LS<span class="ot">&lt;-</span><span class="fu">as.factor</span>(LS_pa<span class="sc">$</span>LS)</span>
<span id="cb135-12"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-12" tabindex="-1"></a></span>
<span id="cb135-13"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-13" tabindex="-1"></a>LS_vect<span class="ot">&lt;-</span><span class="fu">vect</span>(LS_pa, <span class="at">geom=</span><span class="fu">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>),<span class="at">crs=</span><span class="fu">crs</span>(Vaud))</span>
<span id="cb135-14"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-14" tabindex="-1"></a></span>
<span id="cb135-15"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-15" tabindex="-1"></a><span class="co"># Display the structure (str) and result summaries (summary)</span></span>
<span id="cb135-16"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb135-16" tabindex="-1"></a><span class="fu">str</span>(LS_vect)</span></code></pre></div>
<pre><code>## S4 class &#39;SpatVector&#39; [package &quot;terra&quot;]</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb137-1" tabindex="-1"></a><span class="fu">summary</span>(LS_vect)</span></code></pre></div>
<pre><code>##  LS      
##  0:2594  
##  1:2594</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb139-1" tabindex="-1"></a><span class="co"># Plot the events</span></span>
<span id="cb139-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb139-2" tabindex="-1"></a><span class="fu">plot</span>(Vaud)</span>
<span id="cb139-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb139-3" tabindex="-1"></a><span class="fu">plot</span>(Lake, <span class="at">col=</span><span class="st">&quot;lightblue&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb139-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb139-4" tabindex="-1"></a><span class="fu">plot</span>(LS_vect, <span class="at">col=</span>LS_pa<span class="sc">$</span>LS, <span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="fl">0.5</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/import-data-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><img src="http://127.0.0.1:18549/chunk_output/BE976A08f99d29bf/202F00B0/c53949tka16ee/000014.png" /></p>
</div>
<div id="predictor-variables" class="section level4 hasAnchor" number="5.2.2.2">
<h4><span class="header-section-number">5.2.2.2</span> Predictor variables<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#predictor-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Selecting predictive variables is a key stage in landslide susceptibility modelling when using a data-driven approach.
There is no consensus about the number of variables and which variables should be used.
In the present exercise we will use the following:</p>
<ul>
<li><p><strong>DEM (digital elevation model)</strong>: provided by the Swiss Federal Office of Topography.
The elevation is not a direct conditioning factor for landslide; however, it can reflect differences in vegetation characteristics and soil.</p></li>
<li><p><strong>Slope</strong>: is one of the most explicating factor in landslide susceptibility modelling.</p></li>
</ul>
<p><span class="math display">\[Slope = arctan(\sqrt{(dz/dx)^2 + (dz/dy)^2)} * (\pi/2)\]</span></p>
<ul>
<li><p><strong>Curvature</strong>: curvature is widely used in landslide susceptibility modelling.
It allows assessing the water flow acceleration and sediment transport process (<em>profile curvature</em>) and the water flow propensity to converge and diverge (<em>plan curvature</em>).
They have been derived from DEM and directly provided here.</p></li>
<li><p><strong>TWI (topographical water index)</strong>: topography plays a key role in the spatial distribution of soil hydrological conditions.
Defining <span class="math inline">\(\alpha\)</span> as the upslope contributing area describing the propensity of a cell to receive water, and <span class="math inline">\(\beta\)</span> as the slope angle, TWI (compute by the formula below), reflects the propensity of a cell to evacuate water:</p></li>
</ul>
<p><span class="math display">\[TWI=ln(\alpha/tan(\beta))\]</span></p>
<ul>
<li><p><strong>Distance to roads</strong>: roads build in mountainous areas often cut the slope, weakening the cohesion of the soil.
Moreover, roads surfaces are highly impermeable.
This raster has been elaborated by computing the euclidean distance from the swissTLMRegio map where roads are represented by lines.</p></li>
<li><p><strong>Land Cover</strong>: developed by the Swiss administration and based on aerial photographs and control points.
It includes 27 categories distributed in the following 6 domains: human modified surfaces, herbaceous vegetation, shrubs vegetation, tree vegetation, surfaces without vegetation, water surfaces (glaciers included).</p></li>
<li><p><strong>Geology</strong>: the use of the lithology increase the performance of the susceptibility landslide models.
We use here the map elaborated by the Canton Vaud, defining the geotypes and reclassified in 10 classes in order to differentiate sedimentary rocks.</p></li>
</ul>
<p>Than the predictor variables have to be aggregated into a single object, storing multiple rasters.
We use here the generic function <code>c</code> to combine the single raster into a multiple-raster object.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-1" tabindex="-1"></a><span class="do">## Import raster (independent variables) 25 meter resolution</span></span>
<span id="cb140-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-2" tabindex="-1"></a></span>
<span id="cb140-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-3" tabindex="-1"></a>landCover<span class="ot">&lt;-</span><span class="fu">as.factor</span>(<span class="fu">rast</span>(<span class="st">&quot;data/RF/landCover.tif&quot;</span>))</span>
<span id="cb140-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-4" tabindex="-1"></a>geology<span class="ot">&lt;-</span><span class="fu">as.factor</span>(<span class="fu">rast</span>(<span class="st">&quot;data/RF/geology.tif&quot;</span>))</span>
<span id="cb140-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-5" tabindex="-1"></a></span>
<span id="cb140-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-6" tabindex="-1"></a>planCurv<span class="ot">&lt;-</span><span class="fu">rast</span>(<span class="st">&quot;data/RF/plan_curvature.tif&quot;</span>)<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb140-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-7" tabindex="-1"></a>profCurv<span class="ot">&lt;-</span><span class="fu">rast</span>(<span class="st">&quot;data/RF/profil_curvature.tif&quot;</span>)<span class="sc">/</span><span class="dv">100</span> </span>
<span id="cb140-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-8" tabindex="-1"></a><span class="co"># this because the input values was originally multiplied by 100</span></span>
<span id="cb140-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-9" tabindex="-1"></a></span>
<span id="cb140-10"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-10" tabindex="-1"></a>TWI <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/TWI.tif&quot;</span>)</span>
<span id="cb140-11"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-11" tabindex="-1"></a>Slope <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/Slope.tif&quot;</span>)</span>
<span id="cb140-12"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-12" tabindex="-1"></a>dem <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/DEM.tif&quot;</span>)</span>
<span id="cb140-13"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-13" tabindex="-1"></a>dist <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/dist_roads.tif&quot;</span>)</span>
<span id="cb140-14"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-14" tabindex="-1"></a></span>
<span id="cb140-15"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-15" tabindex="-1"></a><span class="co"># Combine raster</span></span>
<span id="cb140-16"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-16" tabindex="-1"></a></span>
<span id="cb140-17"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-17" tabindex="-1"></a>features<span class="ot">&lt;-</span><span class="fu">c</span>(dist, dem, landCover, TWI, planCurv, profCurv, Slope, geology)</span>
<span id="cb140-18"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-18" tabindex="-1"></a></span>
<span id="cb140-19"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-19" tabindex="-1"></a><span class="co"># Renames the input features </span></span>
<span id="cb140-20"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-20" tabindex="-1"></a><span class="fu">names</span>(features)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;distRoad&quot;</span>, <span class="st">&quot;DEM&quot;</span>, <span class="st">&quot;landCover&quot;</span>, <span class="st">&quot;TWI&quot;</span>, <span class="st">&quot;planCurv&quot;</span>, <span class="st">&quot;profCurv&quot;</span>, <span class="st">&quot;slope&quot;</span>, <span class="st">&quot;geology&quot;</span>)</span>
<span id="cb140-21"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-21" tabindex="-1"></a></span>
<span id="cb140-22"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-22" tabindex="-1"></a><span class="co"># Mask to DEM extension</span></span>
<span id="cb140-23"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-23" tabindex="-1"></a>features <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(features, dem)</span>
<span id="cb140-24"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-24" tabindex="-1"></a></span>
<span id="cb140-25"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb140-25" tabindex="-1"></a><span class="fu">plot</span>(features)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/import-raster-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="the-use-of-categorical-variables-in-machine-learning" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> The use of categorical variables in Machine Learning<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#the-use-of-categorical-variables-in-machine-learning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The majority of ML algorithms (e.g., support vector machines, artificial neural network, deep learning) makes predictions on the base of the proximity between the values of the predictors, computed in terms of euclidean distance.
This means that these algorithms can not handle directly categorical values (i.e., qualitative descriptors).
Thus, in most of the cases, categorical variables need to be transformed into a numerical format.
One of the advantage of using Random Forest (as implemented in R) is that it can handle directly categorical variables, since the algorithm operate by constructing a multitude of decision trees at training time and the best split is chosen just by counting the proportion of each class observation.</p>
<p>To understand the characteristics of the categorical variables, you can plot the tow raster <strong>Land Cover</strong> and <strong>Geology</strong> by using their original classes and look at the attribute table to analyse the corresponding definitions.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb141-1" tabindex="-1"></a><span class="fu">plot</span>(geology)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/geology-map-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb142-1" tabindex="-1"></a><span class="fu">plot</span>(landCover)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/geology-map-2.png" width="672" style="display: block; margin: auto;" /></p>
<div class="figure" style="text-align: center">
<img src="data/RF/Cat_classes.png" alt="Categorical variables \label{Cat_class}" width="80%" height="80%" />
<p class="caption">
(#fig:cat_class)Categorical variables
</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div id="extract-the-values" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Extract the values<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#extract-the-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this step, you will extract the values of the predictors at each location in the landslides (presences and absences) dataset.
The final output represents the input dataset with dependent (LS = landslides) and independent (raster features) variables.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-1" tabindex="-1"></a><span class="co"># Extract values from the raster dataset (features)</span></span>
<span id="cb143-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-2" tabindex="-1"></a>LS_input <span class="ot">&lt;-</span><span class="fu">extract</span>(features, LS_vect, <span class="at">method=</span><span class="st">&quot;simple&quot;</span>,  <span class="at">xy=</span><span class="cn">TRUE</span>)</span>
<span id="cb143-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-3" tabindex="-1"></a></span>
<span id="cb143-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-4" tabindex="-1"></a>LS_input<span class="sc">$</span>LS <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(LS_vect<span class="sc">$</span>LS) <span class="co"># add LS</span></span>
<span id="cb143-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-5" tabindex="-1"></a><span class="fu">str</span>(LS_input) <span class="co"># explore the dataset</span></span>
<span id="cb143-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-6" tabindex="-1"></a></span>
<span id="cb143-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-7" tabindex="-1"></a><span class="co"># Remove extra column (ID)</span></span>
<span id="cb143-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-8" tabindex="-1"></a>LS_input <span class="ot">&lt;-</span> LS_input[,<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(LS_input)]</span>
<span id="cb143-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-9" tabindex="-1"></a>LS_input<span class="ot">&lt;-</span><span class="fu">na.omit</span>(LS_input)</span>
<span id="cb143-10"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-10" tabindex="-1"></a></span>
<span id="cb143-11"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-11" tabindex="-1"></a><span class="co"># Explore the newly created input dataset</span></span>
<span id="cb143-12"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-12" tabindex="-1"></a><span class="fu">head</span>(LS_input)</span>
<span id="cb143-13"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb143-13" tabindex="-1"></a><span class="fu">str</span>(LS_input)</span></code></pre></div>
</div>
<div id="split-the-input-dataset-into-training-and-testing" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Split the input dataset into training and testing<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#split-the-input-dataset-into-training-and-testing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A well-established procedure in ML is to split the input dataset into training, validation, and testing.</p>
<ul>
<li>The <strong>training dataset</strong> is needed to calibrate the parameters of the model, which will be used to get predictions on new data.</li>
<li>The purpose of the <strong>validation dataset</strong> is to optimize the hyperparameter of the model in the training phase. NB: in RF this subset is represented by the <em>Out-Of-Bag</em> (<strong>OOB</strong>)!</li>
<li>The <strong>testing dataset</strong> is used in thein the prediction phase: results are predicted over these “new” observations (unused before) to provide an unbiased evaluation of the final model and to assess its performance.</li>
</ul>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-1" tabindex="-1"></a><span class="co"># Shuffle the rows</span></span>
<span id="cb144-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># to ensure reproducibility </span></span>
<span id="cb144-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-3" tabindex="-1"></a>LS_input_sh<span class="ot">&lt;-</span>LS_input [<span class="fu">sample</span>(<span class="fu">nrow</span>(LS_input), <span class="fu">nrow</span>(LS_input)), ] </span>
<span id="cb144-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-4" tabindex="-1"></a></span>
<span id="cb144-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-5" tabindex="-1"></a><span class="co"># Split the input dataset into training (80%) and testing (20%)</span></span>
<span id="cb144-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-6" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span> (LS_input_sh)</span>
<span id="cb144-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-7" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb144-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-8" tabindex="-1"></a>n_train <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fl">0.80</span> <span class="sc">*</span> n) </span>
<span id="cb144-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-9" tabindex="-1"></a>train_indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>n, n_train)</span>
<span id="cb144-10"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-10" tabindex="-1"></a></span>
<span id="cb144-11"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-11" tabindex="-1"></a><span class="co"># Create indices</span></span>
<span id="cb144-12"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-12" tabindex="-1"></a>LS_train <span class="ot">&lt;-</span> LS_input_sh[train_indices, ]  </span>
<span id="cb144-13"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-13" tabindex="-1"></a>LS_test <span class="ot">&lt;-</span> LS_input_sh[<span class="sc">-</span>train_indices, ]</span>
<span id="cb144-14"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-14" tabindex="-1"></a></span>
<span id="cb144-15"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-15" tabindex="-1"></a><span class="co"># Count the number of elements in the two subset: training and testing</span></span>
<span id="cb144-16"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-16" tabindex="-1"></a><span class="fu">count</span>(LS_train)</span>
<span id="cb144-17"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb144-17" tabindex="-1"></a><span class="fu">count</span>(LS_test)</span></code></pre></div>
</div>
<div id="run-random-forest" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Run Random Forest<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#run-random-forest" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In RF a subset of the training dataset is generated by bootstrapping (i.e. random sampling with replacement).
For each subset a decision tree is grown and, at each split, the algorithm randomly selects a number of variables (<code>mtry</code>) and it computes the Gini index to identify the best one.
The process stops when each node contains less than a fixed number of data points.
The main hyperparameters that needs to be defined in RF are <code>mtry</code> and the total number of trees (<code>ntrees</code>).
In this lab we fix these values to 3 and 500, respectively.</p>
<p>The prediction error on the training dataset is finally assessed by evaluating predictions on those observations that were not used in the subset, defined as “out-of-bag” (OOB).
This values is used the optimize the values of the hyperparameters, by a trial and error process (that is, trying to minimize the OOB estimate of error rate).</p>
<p>For the computation we introduce here the method proposed by <span class="citation">Breiman (<a href="#ref-breiman_random_2001">2001</a>)</span> and implemented in the R package <code>randomForest</code> <span class="citation">(<a href="#ref-RF_library">Liaw &amp; Wiener, 2002</a>)</span>.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb145-1" tabindex="-1"></a><span class="co"># Set the seed of R‘s random number generator, </span></span>
<span id="cb145-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb145-2" tabindex="-1"></a><span class="do">## this is useful for creating simulations that can be reproduced.</span></span>
<span id="cb145-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb145-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) </span>
<span id="cb145-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb145-4" tabindex="-1"></a></span>
<span id="cb145-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb145-5" tabindex="-1"></a><span class="co"># Run RF model</span></span>
<span id="cb145-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb145-6" tabindex="-1"></a>RF_LS<span class="ot">&lt;-</span><span class="fu">randomForest</span>(<span class="at">y=</span>LS_train<span class="sc">$</span>LS, <span class="at">x=</span>LS_train[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>],<span class="at">data=</span>LS_train, <span class="at">ntree=</span><span class="dv">500</span>, <span class="at">mtry=</span><span class="dv">3</span>,<span class="at">importance=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="rf-main-outputs" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> RF main outputs<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#rf-main-outputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Printing the results of RF allows you to gain insight into the outputs of the implemented model, namely the following: a summary of the model hyperparameters, the OOB estimate of error rate, the confusion matrix (in this case a 2x2 matrix used for evaluating the performance of the classification model: 1==presence <em>vs</em> 0==absence).</p>
<p>The plot of the error rate is useful to estimate the decreasing values on the OOB and on the predictions (1==presence <em>vs</em> 0==absence) over increasing number of trees.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb146-1" tabindex="-1"></a><span class="co"># Print the model setting</span></span>
<span id="cb146-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb146-2" tabindex="-1"></a><span class="fu">print</span>(RF_LS) </span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(x = LS_train[1:8], y = LS_train$LS, ntree = 500,      mtry = 3, importance = TRUE, data = LS_train) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 3
## 
##         OOB estimate of  error rate: 16.19%
## Confusion matrix:
##      0    1 class.error
## 0 1681  395   0.1902697
## 1  275 1787   0.1333657</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb148-1" tabindex="-1"></a><span class="co"># Show the predicted probability values</span></span>
<span id="cb148-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb148-2" tabindex="-1"></a>RF.predict <span class="ot">&lt;-</span> <span class="fu">predict</span>(RF_LS,<span class="at">type=</span><span class="st">&quot;prob&quot;</span>)</span>
<span id="cb148-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb148-3" tabindex="-1"></a><span class="fu">head</span>(RF.predict) <span class="co"># 0 = absence ; 1 = presence</span></span></code></pre></div>
<pre><code>##               0         1
## 1447 0.20108696 0.7989130
## 671  0.01463415 0.9853659
## 1121 0.22099448 0.7790055
## 4443 0.79207921 0.2079208
## 4032 0.21500000 0.7850000
## 2075 0.16666667 0.8333333</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb150-1" tabindex="-1"></a><span class="co"># Plot the OOB error rate</span></span>
<span id="cb150-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb150-2" tabindex="-1"></a><span class="fu">plot</span>(RF_LS)  </span>
<span id="cb150-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb150-3" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x=</span><span class="st">&quot;topright&quot;</span>, <span class="at">legend=</span><span class="fu">c</span>(<span class="st">&quot;perd 0&quot;</span>, <span class="st">&quot;pred 1&quot;</span>, <span class="st">&quot;OOB error&quot;</span>), </span>
<span id="cb150-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb150-4" tabindex="-1"></a> <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;black&quot;</span>), <span class="at">lty=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">cex=</span><span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/RF-outputs-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="model-evaluation" class="section level3 hasAnchor" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> Model evaluation<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#model-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The prediction capability of the implemented RF model can be evaluated by predicting the results over previously unseen data, that is the testing dataset.
The <em>Area Under the “Receiver Operating Characteristic (ROC)” Curve</em> (<strong>AUC</strong>) represents the evaluation score used here as indicator of the goodness of the model in classifying areas more susceptible to landslides.
The ROC curve is a graphical technique based on the plot of the percentage of correct classification (the true positives rate) against the false positives rate (occurring when an outcome is incorrectly predicted as belonging to the class “1” when it actually belongs to the class “0”), evaluates for many thresholds.
The AUC value lies between 0.5, denoting a bad classifier, and 1, denoting an excellent classifier, which, on the other hand, can indicate overfitting.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-1" tabindex="-1"></a><span class="co"># Make predictions on the testing dataset</span></span>
<span id="cb151-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-2" tabindex="-1"></a>RFpred_test <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="at">object =</span> RF_LS, <span class="at">newdata =</span> LS_test, <span class="at">type=</span><span class="st">&quot;prob&quot;</span>)</span>
<span id="cb151-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-3" tabindex="-1"></a></span>
<span id="cb151-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-4" tabindex="-1"></a><span class="co"># Make predictions on the validation dataset (taining using the Out-of-bag)</span></span>
<span id="cb151-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-5" tabindex="-1"></a>RFpred_oob <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="at">object =</span> RF_LS, <span class="at">newdata =</span> LS_train, <span class="at">type=</span><span class="st">&quot;prob&quot;</span>, <span class="at">OOB=</span><span class="cn">TRUE</span>)</span>
<span id="cb151-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-6" tabindex="-1"></a></span>
<span id="cb151-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-7" tabindex="-1"></a>roc_test <span class="ot">&lt;-</span> <span class="fu">roc</span>(LS_test<span class="sc">$</span>LS, RFpred_test[,<span class="dv">2</span>])</span>
<span id="cb151-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-8" tabindex="-1"></a>roc_oob <span class="ot">&lt;-</span> <span class="fu">roc</span>(LS_train<span class="sc">$</span>LS, RFpred_oob[,<span class="dv">2</span>])</span>
<span id="cb151-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-9" tabindex="-1"></a></span>
<span id="cb151-10"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-10" tabindex="-1"></a><span class="fu">plot.new</span>()</span>
<span id="cb151-11"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-11" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">-</span>roc_test<span class="sc">$</span>specificities, roc_test<span class="sc">$</span>sensitivities, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>, <span class="at">col =</span> <span class="st">&#39;blue&#39;</span>,  <span class="at">xlab =</span> <span class="st">&quot;False positive rate&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;True positive rate&quot;</span>)</span>
<span id="cb151-12"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb151-12" tabindex="-1"></a><span class="fu">lines</span>(<span class="dv">1</span><span class="sc">-</span>roc_oob<span class="sc">$</span>specificities, roc_oob<span class="sc">$</span>sensitivities, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/RF-val-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb152-1" tabindex="-1"></a><span class="co"># Print AUC values</span></span>
<span id="cb152-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb152-2" tabindex="-1"></a>roc_test</span>
<span id="cb152-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb152-3" tabindex="-1"></a>roc_oob</span></code></pre></div>
</div>
</div>
<div id="susceptibility-mapping" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Susceptibility mapping<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#susceptibility-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You have now all the elements necessary to elaborate the final landslide susceptibility map.
This can be achieved by making predictions (of presence only) based on the values of the predictor variables, which are stored into the multiple-raster named <em>features</em>, created above.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-1" tabindex="-1"></a><span class="co"># Convert the input multiple raster to data frame </span></span>
<span id="cb153-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-2" tabindex="-1"></a>features_df<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(features, <span class="at">xy=</span><span class="cn">TRUE</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) </span>
<span id="cb153-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-3" tabindex="-1"></a></span>
<span id="cb153-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-4" tabindex="-1"></a><span class="co"># Predict results of RF (probability of fires presence: index = 2) to the feature space </span></span>
<span id="cb153-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-5" tabindex="-1"></a><span class="do">## this operation can take several minuts to run!</span></span>
<span id="cb153-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-6" tabindex="-1"></a>scp_map<span class="ot">&lt;-</span><span class="fu">predict</span>(<span class="at">object =</span> RF_LS, <span class="at">newdata =</span> features_df, <span class="at">type=</span><span class="st">&quot;prob&quot;</span>, <span class="at">index=</span><span class="dv">2</span>) </span>
<span id="cb153-7"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-7" tabindex="-1"></a></span>
<span id="cb153-8"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-8" tabindex="-1"></a>scp_df<span class="ot">=</span><span class="fu">as.data.frame</span>(scp_map) <span class="co"># convert to data frame</span></span>
<span id="cb153-9"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-9" tabindex="-1"></a><span class="co"># get coordinates </span></span>
<span id="cb153-10"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-10" tabindex="-1"></a>scp_df<span class="sc">$</span>X<span class="ot">=</span>features_df<span class="sc">$</span>x</span>
<span id="cb153-11"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-11" tabindex="-1"></a>scp_df<span class="sc">$</span>Y<span class="ot">=</span>features_df<span class="sc">$</span>y</span>
<span id="cb153-12"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-12" tabindex="-1"></a></span>
<span id="cb153-13"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-13" tabindex="-1"></a><span class="co"># Convert to raster the probability to get a landslide</span></span>
<span id="cb153-14"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-14" tabindex="-1"></a><span class="do">## 3=X, 4=Y, 2=probability of presence (1)</span></span>
<span id="cb153-15"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-15" tabindex="-1"></a>scp_rast<span class="ot">=</span><span class="fu">rast</span>(scp_df[,<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">2</span>)],<span class="at">type=</span><span class="st">&quot;xyz&quot;</span>)</span>
<span id="cb153-16"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-16" tabindex="-1"></a><span class="fu">summary</span>(scp_rast)</span>
<span id="cb153-17"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb153-17" tabindex="-1"></a><span class="fu">plot</span>(scp_rast)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/Scp-map-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb154-1" tabindex="-1"></a><span class="co"># Save all outputs</span></span>
<span id="cb154-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb154-2" tabindex="-1"></a><span class="do">## this operation can take several minuts to run!</span></span>
<span id="cb154-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb154-3" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file=</span><span class="st">&quot;LSM_RF.RData&quot;</span>)</span>
<span id="cb154-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb154-4" tabindex="-1"></a></span>
<span id="cb154-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb154-5" tabindex="-1"></a><span class="co"># Export susceptibility map as raster</span></span>
<span id="cb154-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb154-6" tabindex="-1"></a><span class="fu">writeRaster</span>(scp_rast,<span class="st">&quot;Susceptibility_LSmap.tif&quot;</span>,<span class="at">overwrite=</span>T) </span></code></pre></div>
<div id="class-intervals-for-decision-maker" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Class intervals for decision maker<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#class-intervals-for-decision-maker" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What can you say by looking at this map?
Actually a risk heat map like this provide a data visualization tool for communicating the level for a specific risk to occur.
These maps helps authorities to identify and prioritize the risks associated with a given hazard.</p>
<p>Normally an authority (i.e., a decision maker) prioritize its efforts based on the available resources it has.
So, it can be more useful to detect the areas with the highest probability of burning based on certain intervals (i.e., breaks).
The authority can thus concentrate its resources for preventive actions on a given threshold (such as 5%, 10%, or 20%) of the area with the highest probability of burning, instead of concentrates on the areas with a “stochastic” output probability value of 0.8 (for example).</p>
<div id="equal-intervals" class="section level4 hasAnchor" number="5.3.1.1">
<h4><span class="header-section-number">5.3.1.1</span> Equal intervals<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#equal-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Susceptibility maps are based on equal intervals, five classes (each 20%) in this case.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb155-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;RColorBrewer&quot;</span>)</span>
<span id="cb155-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb155-2" tabindex="-1"></a><span class="fu">plot</span>(scp_rast, <span class="at">xlab =</span> <span class="st">&quot;East [m]&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;North [m]&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Landslides susceptibility map&quot;</span>, <span class="at">col =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&#39;#a50026&#39;</span>,<span class="st">&#39;#d73027&#39;</span>,<span class="st">&#39;#f46d43&#39;</span>,<span class="st">&#39;#fdae61&#39;</span>,<span class="st">&#39;#fee08b&#39;</span>,<span class="st">&#39;#d9ef8b&#39;</span>)))</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/equal-interval-map-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="quartile" class="section level4 hasAnchor" number="5.3.1.2">
<h4><span class="header-section-number">5.3.1.2</span> Quartile<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#quartile" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Breaks are chosen based on the summary statics: these values corresponds to the quartiles of the p-value distribution (values divided into four equal partitions).</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb156-1" tabindex="-1"></a>brk<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.03</span>, <span class="fl">0.14</span>, <span class="fl">0.43</span>, <span class="dv">1</span>) </span>
<span id="cb156-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb156-2" tabindex="-1"></a></span>
<span id="cb156-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb156-3" tabindex="-1"></a><span class="fu">plot</span>(scp_rast, <span class="at">xlab =</span> <span class="st">&quot;East [m]&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;North [m]&quot;</span>, </span>
<span id="cb156-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb156-4" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Landslides susceptibility map&quot;</span>, </span>
<span id="cb156-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb156-5" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;brown&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;grey&quot;</span>)), <span class="at">breaks=</span>brk) </span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/quartile-map-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="percentiles" class="section level4 hasAnchor" number="5.3.1.3">
<h4><span class="header-section-number">5.3.1.3</span> Percentiles<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#percentiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Breaks are chosen based on well-established percentile classes.
For exaple, in this case the 20th percentile correspond to the p-value below wich the 25% of the observation lie, while the 95th can be interpreted as the p-value above which the complementary 5% of the observation lie.
The legend show the p-values correspondig to the percentile classes indicated below.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb157-1" tabindex="-1"></a><span class="co"># Output predicted values are transformed to a vector</span></span>
<span id="cb157-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb157-2" tabindex="-1"></a>pred.vect <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(scp_map[, <span class="dv">2</span>])</span>
<span id="cb157-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb157-3" tabindex="-1"></a></span>
<span id="cb157-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb157-4" tabindex="-1"></a><span class="co"># The function &quot;quantile&quot; is used to fix classes</span></span>
<span id="cb157-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb157-5" tabindex="-1"></a>qtl.pred <span class="ot">&lt;-</span> <span class="fu">quantile</span>(pred.vect, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>,<span class="fl">0.85</span>,<span class="fl">0.95</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb157-6"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb157-6" tabindex="-1"></a>qtl.pred</span></code></pre></div>
<pre><code>##   25%   50%   75%   85%   95% 
## 0.046 0.166 0.448 0.614 0.832</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb159-1" tabindex="-1"></a><span class="co"># and then extract the corresponding values</span></span>
<span id="cb159-2"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb159-2" tabindex="-1"></a>qtl.int<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.03</span>,<span class="fl">0.14</span>,<span class="fl">0.42</span>,<span class="fl">0.6</span>,<span class="fl">0.82</span>,<span class="dv">1</span>)</span>
<span id="cb159-3"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb159-3" tabindex="-1"></a><span class="fu">plot</span>(scp_rast, <span class="at">xlab =</span> <span class="st">&quot;East [m]&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;North [m]&quot;</span>, </span>
<span id="cb159-4"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb159-4" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Landslides susceptibility map&quot;</span>, </span>
<span id="cb159-5"><a href="predictive-mapping-of-natural-hazards-using-random-forest.html#cb159-5" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;brown&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;orange&quot;</span>,<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;grey&quot;</span>)), <span class="at">breaks=</span>qtl.int)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/percentile-map-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="conclusions-and-further-analyses-2" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Conclusions and further analyses<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#conclusions-and-further-analyses-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This exercise allowed you to familiarize with Random Forest, by the proposed application about landslides susceptibility mapping and variables importance assessment.</p>
<p>To ensure that everything is perfectly clear, we propose you to <strong>answer the following questions</strong>.</p>
<ol style="list-style-type: decimal">
<li><p>Why is it important to implement the pseudo-absences, other that the presences (i.e., the observations) in a data-driven modelization?</p></li>
<li><p>What is the difference between a numerical and a categorical variable?
Give some examples of both types.
Why RF can handle directly native categorical variables?
Is it the same for other algorithms (like logistic regression or neural network)?</p></li>
<li><p>Which is the values of the OOB estimate error rate of your model?
Which parameters you can change to try to reduce it?
Be brave and do it (i.e., change the values for <em>ntree</em> and <em>mtry,</em> than analyse which values for the AUC you obtain and which model perform better.</p></li>
</ol>
</div>
<div id="further-reading-on-this-topic" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Further reading on this topic<a href="predictive-mapping-of-natural-hazards-using-random-forest.html#further-reading-on-this-topic" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The research framework that inspired this computing lab refers to a pioneering study in susceptibility mapping for wildfire events by <span class="citation">(<a href="#ref-tonini_machine_2020">Tonini et al., 2020</a>)</span> and further developed for the assessment of variable importance by <span class="citation">(<a href="#ref-trucchia_machine-learning_2022">Trucchia et al., 2022</a>)</span>.
Analyses have been adapted to the case study of landslides.</p>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-breiman_random_2001" class="csl-entry">
Breiman, L. (2001). Random forest. <em>Machine Learning</em>, <em>45</em>(1), 5–32. <a href="https://doi.org/10.1023/A:1010933404324">https://doi.org/10.1023/A:1010933404324</a>
</div>
<div id="ref-RF_library" class="csl-entry">
Liaw, A., &amp; Wiener, M. (2002). Classification and regression by randomForest. <em>R News</em>, <em>2</em>(3), 18–22. <a href="https://CRAN.R-project.org/doc/Rnews/">https://CRAN.R-project.org/doc/Rnews/</a>
</div>
<div id="ref-tonini_machine_2020" class="csl-entry">
Tonini, M., D’Andrea, M., Biondi, G., Degli Esposti, S., Trucchia, A., &amp; Fiorucci, P. (2020). A machine learning-based approach for wildfire susceptibility mapping. The case study of the liguria region in italy. <em>Geosciences</em>, <em>10</em>(3), 105. <a href="https://doi.org/10.3390/geosciences10030105">https://doi.org/10.3390/geosciences10030105</a>
</div>
<div id="ref-trucchia_machine-learning_2022" class="csl-entry">
Trucchia, A., Izadgoshasb, H., Isnardi, S., Fiorucci, P., &amp; Tonini, M. (2022). Machine-learning applications in geosciences: Comparison of different algorithms and vegetation classes’ importance ranking in wildfire susceptibility. <em>Geosciences</em>, <em>12</em>(11), 424. <a href="https://doi.org/10.3390/geosciences12110424">https://doi.org/10.3390/geosciences12110424</a>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="spatio-temporal-cluster-analysis-of-geoenvironmental-processes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interpretability-explainability-with-random-forest.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/EugeneGIS/AGDAbook/edit/master/05-RF_Cl.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["fake-book.pdf", "fake-book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
